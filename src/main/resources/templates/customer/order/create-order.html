<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{customer/layout-customer}">

<head>
    <title>Tạo Đơn Hàng - Customer</title>
</head>

<body>

    <div layout:fragment="content">

        <h2 class="h4 mb-4 fw-bold border-bottom pb-2">Tạo vận đơn mới</h2>

        <!-- Error/Success Messages -->
        <div th:if="${errorMessage}" class="alert alert-danger alert-dismissible fade show" role="alert">
            <i class="fas fa-exclamation-circle me-2"></i>
            <span th:text="${errorMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        <div th:if="${successMessage}" class="alert alert-success alert-dismissible fade show" role="alert">
            <i class="fas fa-check-circle me-2"></i>
            <span th:text="${successMessage}"></span>
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>

        <form th:action="@{/customer/create-order}" method="post">
            <div class="row g-4">

                <div class="col-lg-8">

                    <!-- CARD 1: Thông tin địa điểm -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <h6 class="m-0 fw-bold text-primary"><i class="fas fa-map-marker-alt me-2"></i>Thông tin địa
                                điểm</h6>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <!-- Cột người gửi -->
                                <div class="col-md-6 border-end">
                                    <h6 class="small text-muted text-uppercase fw-bold mb-3">1. Người gửi (Từ đâu?)</h6>

                                    <!-- MÃ KHÁCH HÀNG NGƯỜI GỬI (MỚI) -->
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold text-primary">
                                            <i class="fas fa-id-card me-1"></i>Mã khách hàng người gửi <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="text" name="senderCode" class="form-control border-primary"
                                            placeholder="VD: CUST-20251230-001" required>
                                        <div class="form-text small">Nhập mã khách hàng của người gửi</div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Họ tên người gửi</label>
                                        <input type="text" name="senderName" class="form-control"
                                            placeholder="VD: Nguyễn Văn B">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Số điện thoại</label>
                                        <input type="text" name="senderPhone" class="form-control"
                                            placeholder="09xx...">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Địa chỉ lấy hàng <span
                                                class="text-danger">*</span></label>
                                        <div class="input-group">
                                            <select class="form-select">
                                                <option value="">-- Chọn từ danh bạ --</option>
                                            </select>
                                            <button class="btn btn-outline-secondary" type="button"><i
                                                    class="fas fa-plus"></i></button>
                                        </div>
                                        <textarea name="senderAddress" class="form-control mt-2" rows="2"
                                            placeholder="Hoặc nhập địa chỉ mới..." required></textarea>
                                    </div>
                                </div>

                                <!-- Cột người nhận -->
                                <div class="col-md-6">
                                    <h6 class="small text-muted text-uppercase fw-bold mb-3">2. Người nhận (Đến đâu?)
                                    </h6>

                                    <!-- MÃ KHÁCH HÀNG NGƯỜI NHẬN (MỚI) -->
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold text-success">
                                            <i class="fas fa-id-card me-1"></i>Mã khách hàng người nhận <span
                                                class="text-danger">*</span>
                                        </label>
                                        <input type="text" name="receiverCode" class="form-control border-success"
                                            placeholder="VD: CUST-20251230-002" required>
                                        <div class="form-text small">Nhập mã khách hàng của người nhận</div>
                                    </div>

                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Họ tên người nhận <span
                                                class="text-danger">*</span></label>
                                        <input type="text" name="receiverName" class="form-control"
                                            placeholder="VD: Anh Nam" required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Số điện thoại <span
                                                class="text-danger">*</span></label>
                                        <input type="text" name="receiverPhone" class="form-control"
                                            placeholder="09xx..." required>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label small fw-bold">Địa chỉ giao hàng <span
                                                class="text-danger">*</span></label>
                                        <textarea name="receiverAddress" class="form-control" rows="3"
                                            placeholder="Số nhà, đường, phường, xã..." required></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- CARD 2: Thông tin hàng hóa & COD -->
                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <h6 class="m-0 fw-bold text-primary"><i class="fas fa-box me-2"></i>Thông tin hàng hóa & COD
                            </h6>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label class="form-label fw-bold">Tên hàng hóa <span
                                            class="text-danger">*</span></label>
                                    <input type="text" name="productDescription" class="form-control"
                                        placeholder="VD: Máy giặt, Thùng sơn..." required>
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Loại hàng</label>
                                    <select name="productType" class="form-select">
                                        <option value="NORMAL">Hàng thông thường</option>
                                        <option value="FRAGILE">Hàng dễ vỡ</option>
                                        <option value="FROZEN">Hàng đông lạnh</option>
                                        <option value="LIQUID">Chất lỏng/Hóa chất</option>
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Trọng lượng (kg)</label>
                                    <input type="number" name="weight" class="form-control" min="0.1" step="0.1"
                                        placeholder="0.0">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">Kích thước (D x R x C)</label>
                                    <input type="text" name="dimensions" class="form-control"
                                        placeholder="cm x cm x cm">
                                </div>

                                <div class="col-md-6">
                                    <label class="form-label">Giá trị hàng hóa (VNĐ)</label>
                                    <input type="number" name="productValue" class="form-control"
                                        placeholder="Để tính bảo hiểm">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label fw-bold text-success"><i
                                            class="fas fa-hand-holding-usd me-1"></i>Tiền thu hộ (COD)</label>
                                    <input type="number" name="codAmount" class="form-control border-success"
                                        placeholder="0" value="0">
                                    <div class="form-text small">Nhập số tiền cần thu từ người nhận (nếu có).</div>
                                </div>

                                <div class="col-12">
                                    <label class="form-label">Ghi chú cho tài xế</label>
                                    <textarea name="note" class="form-control" rows="2"
                                        placeholder="VD: Gọi trước khi giao, hàng nhẹ xếp trên..."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

                <!-- Sidebar -->
                <div class="col-lg-4">

                    <div class="card shadow-sm mb-4">
                        <div class="card-header bg-white py-3">
                            <h6 class="m-0 fw-bold text-primary"><i class="fas fa-truck me-2"></i>Gói vận chuyển</h6>
                        </div>
                        <div class="card-body">
                            <div class="form-check mb-3 border rounded p-3 bg-light">
                                <input class="form-check-input" type="radio" name="serviceType" id="srv1"
                                    value="STANDARD" checked>
                                <label class="form-check-label w-100" for="srv1">
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Tiêu chuẩn</span>
                                        <span class="text-primary">Giá tốt</span>
                                    </div>
                                    <small class="text-muted">Thời gian: 3-5 ngày</small>
                                </label>
                            </div>
                            <div class="form-check mb-3 border rounded p-3">
                                <input class="form-check-input" type="radio" name="serviceType" id="srv2"
                                    value="EXPRESS">
                                <label class="form-check-label w-100" for="srv2">
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Giao nhanh</span>
                                        <span class="text-warning">24-48h</span>
                                    </div>
                                    <small class="text-muted">Ưu tiên giao sớm</small>
                                </label>
                            </div>
                            <div class="form-check mb-0 border rounded p-3">
                                <input class="form-check-input" type="radio" name="serviceType" id="srv3"
                                    value="SAME_DAY">
                                <label class="form-check-label w-100" for="srv3">
                                    <div class="d-flex justify-content-between fw-bold">
                                        <span>Giao trong ngày</span>
                                        <span class="text-danger">Siêu tốc</span>
                                    </div>
                                    <small class="text-muted">Nội thành trong ngày</small>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="card shadow-sm bg-primary text-white">
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button type="submit" class="btn btn-light text-primary fw-bold py-3 shadow">
                                    <i class="fas fa-paper-plane me-2"></i> TẠO ĐƠN HÀNG
                                </button>
                                <div class="text-center small opacity-75 mt-2">
                                    Nhân viên sẽ gọi xác nhận sau 15 phút.
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </form>

    </div>
</body>

</html>