<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body>
    <!-- 
        Pagination Fragment - Thêm vào cuối trang cần phân trang
        
        Cách dùng: 
        <div th:replace="~{fragments/pagination :: pagination(
            currentPage=${page.currentPage}, 
            totalPages=${page.totalPages}, 
            baseUrl='/staff/parcels')}">
        </div>
        
        Hoặc với query params:
        <div th:replace="~{fragments/pagination :: paginationWithParams(
            currentPage=${page.currentPage}, 
            totalPages=${page.totalPages})}">
        </div>
    -->

    <!-- Pagination cơ bản -->
    <nav th:fragment="pagination(currentPage, totalPages, baseUrl)" aria-label="Page navigation"
        th:if="${totalPages > 1}">
        <ul class="pagination justify-content-center mb-0">
            <!-- Previous -->
            <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled' : ''">
                <a class="page-link" th:href="@{${baseUrl}(page=${currentPage - 1})}" th:if="${currentPage > 0}">
                    <i class="fas fa-chevron-left"></i>
                </a>
                <span class="page-link" th:if="${currentPage == 0}">
                    <i class="fas fa-chevron-left"></i>
                </span>
            </li>

            <!-- First page -->
            <li class="page-item" th:if="${currentPage > 2}">
                <a class="page-link" th:href="@{${baseUrl}(page=0)}">1</a>
            </li>
            <li class="page-item disabled" th:if="${currentPage > 3}">
                <span class="page-link">...</span>
            </li>

            <!-- Page numbers -->
            <th:block th:each="i : ${#numbers.sequence(
                T(java.lang.Math).max(0, currentPage - 2), 
                T(java.lang.Math).min(totalPages - 1, currentPage + 2))}">
                <li class="page-item" th:classappend="${i == currentPage} ? 'active' : ''">
                    <a class="page-link" th:href="@{${baseUrl}(page=${i})}" th:text="${i + 1}">1</a>
                </li>
            </th:block>

            <!-- Last page -->
            <li class="page-item disabled" th:if="${currentPage < totalPages - 4}">
                <span class="page-link">...</span>
            </li>
            <li class="page-item" th:if="${currentPage < totalPages - 3}">
                <a class="page-link" th:href="@{${baseUrl}(page=${totalPages - 1})}" th:text="${totalPages}">10</a>
            </li>

            <!-- Next -->
            <li class="page-item" th:classappend="${currentPage >= totalPages - 1} ? 'disabled' : ''">
                <a class="page-link" th:href="@{${baseUrl}(page=${currentPage + 1})}"
                    th:if="${currentPage < totalPages - 1}">
                    <i class="fas fa-chevron-right"></i>
                </a>
                <span class="page-link" th:if="${currentPage >= totalPages - 1}">
                    <i class="fas fa-chevron-right"></i>
                </span>
            </li>
        </ul>
    </nav>

    <!-- Pagination info text -->
    <div th:fragment="paginationInfo(currentPage, pageSize, totalItems)" class="text-muted text-center small mt-2">
        <span th:text="'Hiển thị ' + (currentPage * pageSize + 1) + ' - ' + 
              T(java.lang.Math).min((currentPage + 1) * pageSize, totalItems) + 
              ' trong tổng ' + totalItems + ' mục'">
            Hiển thị 1 - 10 trong tổng 100 mục
        </span>
    </div>

</body>

</html>