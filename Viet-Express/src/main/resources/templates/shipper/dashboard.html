<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{shipper/layout-shipper}">

<head>
    <title>T·ªïng Quan - Driver</title>
</head>

<body>

    <div layout:fragment="content">

        <!-- Welcome Banner with T·∫øt Theme -->
        <div class="card card-tet mb-4"
            style="background: linear-gradient(135deg, #c41e3a, #8b0000); border: 3px solid #ffd700;">
            <div class="card-body py-4">
                <div class="row align-items-center">
                    <div class="col-auto">
                        <div style="font-size: 4rem; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);">üßß</div>
                    </div>
                    <div class="col">
                        <h2 class="text-warning mb-1">
                            Xin ch√†o, <span
                                th:text="${currentShipper != null ? currentShipper.fullName : 'B√°c t√†i'}">B√°c
                                t√†i</span>!
                        </h2>
                        <p class="text-light mb-0 opacity-75">
                            Ch√∫c b·∫°n m·ªôt nƒÉm m·ªõi An Khang Th·ªãnh V∆∞·ª£ng! üéä
                        </p>
                    </div>
                    <div class="col-auto">
                        <div class="badge p-3" th:if="${currentShipper != null && currentShipper.isActive}"
                            style="background: linear-gradient(135deg, #28a745, #20c997); font-size: 1rem;">
                            <i class="fas fa-check-circle me-1"></i> ƒêang ho·∫°t ƒë·ªông
                        </div>
                        <div class="badge bg-danger p-3"
                            th:unless="${currentShipper != null && currentShipper.isActive}" style="font-size: 1rem;">
                            <i class="fas fa-pause-circle me-1"></i> Ng·ª´ng ho·∫°t ƒë·ªông
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Cards with T·∫øt Colors -->
        <div class="row g-3 mb-4">
            <div class="col-6 col-lg-3">
                <div class="card shadow-sm h-100 card-tet-primary">
                    <div class="card-body p-3 text-center">
                        <div style="font-size: 2.5rem; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);">
                            <i class="fas fa-truck text-warning"></i>
                        </div>
                        <h2 class="fw-bold mb-0 text-warning" th:text="${totalTripsCount}">0</h2>
                        <small class="text-light text-uppercase">T·ªïng chuy·∫øn xe</small>
                    </div>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="card shadow-sm h-100"
                    style="background: linear-gradient(135deg, #28a745, #20c997); border: 2px solid #ffd700;">
                    <div class="card-body p-3 text-center text-white">
                        <div style="font-size: 2.5rem;">
                            <i class="fas fa-check-double"></i>
                        </div>
                        <h2 class="fw-bold mb-0" th:text="${completedTripsCount}">0</h2>
                        <small class="text-uppercase opacity-75">ƒê√£ giao xong</small>
                    </div>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="card shadow-sm h-100"
                    style="background: linear-gradient(135deg, #ffd700, #ffb700); border: 2px solid #c41e3a;">
                    <div class="card-body p-3 text-center" style="color: #8b0000;">
                        <div style="font-size: 2.5rem;">
                            <i class="fas fa-shipping-fast"></i>
                        </div>
                        <h3 class="fw-bold mb-0" th:text="${activeTripsCount}">0</h3>
                        <small class="text-uppercase">ƒêang ch·∫°y</small>
                    </div>
                </div>
            </div>
            <div class="col-6 col-lg-3">
                <div class="card shadow-sm h-100"
                    style="background: linear-gradient(135deg, #6f42c1, #e83e8c); border: 2px solid #ffd700;">
                    <div class="card-body p-3 text-center text-white">
                        <div style="font-size: 2.5rem;">
                            <i class="fas fa-map-marked-alt"></i>
                        </div>
                        <h3 class="fw-bold mb-0"
                            th:text="${currentShipper != null ? currentShipper.workingArea : 'N/A'}"
                            style="font-size: 1.1rem;">H√† N·ªôi</h3>
                        <small class="text-uppercase opacity-75">Khu v·ª±c</small>
                    </div>
                </div>
            </div>
        </div>

        <!-- ACTIVE TRIP CARD with T·∫øt Theme -->
        <div class="card shadow card-tet mb-4" th:if="${activeTrips != null and !activeTrips.empty}">
            <div class="card-header py-3 d-flex justify-content-between align-items-center">
                <h6 class="m-0 fw-bold">
                    <i class="fas fa-truck-moving me-2"></i>Chuy·∫øn xe ƒëang th·ª±c hi·ªán
                </h6>
                <span class="badge" style="background: #ffd700; color: #8b0000;"
                    th:text="${activeTrips.size()} + ' chuy·∫øn'">1 chuy·∫øn</span>
            </div>
            <div class="card-body" style="background: linear-gradient(180deg, #fff8f0, #ffffff);">
                <div class="list-group list-group-flush">
                    <a th:each="trip : ${activeTrips}" th:href="@{/shipper/trip/{id}(id=${trip.id})}"
                        class="list-group-item list-group-item-action d-flex gap-3 py-3 border-start border-4"
                        style="border-color: #ffd700 !important; transition: all 0.3s ease;">
                        <div class="d-flex gap-2 w-100 justify-content-between">
                            <div>
                                <h6 class="mb-0 text-danger"
                                    th:text="'Chuy·∫øn #' + ${trip.id} + ' - ' + ${trip.startLocationName} + ' ‚Üí ' + ${trip.endLocationName}">
                                    Chuy·∫øn #123 - H√† N·ªôi ƒëi H·∫£i Ph√≤ng
                                </h6>
                                <p class="mb-0 opacity-75" th:text="${trip.startLocationName}">ƒêang t·∫°i kho A</p>
                            </div>
                            <small class="opacity-50 text-nowrap"
                                th:text="${#temporals.format(trip.startedAt, 'HH:mm dd/MM')}">Now</small>
                        </div>
                        <span class="badge rounded-pill align-self-center"
                            style="background: linear-gradient(135deg, #ffd700, #ffb700); color: #8b0000;"
                            th:text="${trip.status}">IN_PROGRESS</span>
                    </a>
                </div>
            </div>
        </div>

        <!-- EMPTY STATE with T·∫øt Theme -->
        <div class="card shadow card-tet mb-4" th:if="${activeTrips == null or activeTrips.empty}">
            <div class="card-header py-3">
                <h6 class="m-0 fw-bold">
                    <i class="fas fa-truck-moving me-2"></i>Chuy·∫øn xe ƒëang th·ª±c hi·ªán
                </h6>
            </div>
            <div class="card-body text-center py-5" style="background: linear-gradient(180deg, #fff8f0, #ffffff);">
                <div style="font-size: 4rem; opacity: 0.5;">üöõ</div>
                <p class="text-muted mb-3">Hi·ªán ch∆∞a c√≥ chuy·∫øn xe n√†o ƒëang ch·∫°y.</p>
                <a th:href="@{/shipper/trips}" class="btn btn-tet">
                    <i class="fas fa-list me-1"></i> Xem danh s√°ch chuy·∫øn
                </a>
            </div>
        </div>

        <!-- Notifications Card -->
        <div class="card shadow-sm card-tet">
            <div class="card-header">
                <h6 class="m-0 fw-bold"><i class="fas fa-bell me-2"></i>Th√¥ng b√°o t·ª´ ƒëi·ªÅu h√†nh</h6>
            </div>
            <div class="list-group list-group-flush" style="background: #fff8f0;">
                <div class="list-group-item text-center py-4">
                    <div style="font-size: 2rem;">üéâ</div>
                    <span class="text-danger fw-bold">Ch√∫c M·ª´ng NƒÉm M·ªõi 2026!</span>
                    <p class="text-muted small mb-0 mt-1">Ch√∫c c√°c b√°c t√†i m·ªôt nƒÉm m·ªõi b√¨nh an, ph√°t t√†i!</p>
                </div>
            </div>
        </div>

    </div>

</body>

</html>