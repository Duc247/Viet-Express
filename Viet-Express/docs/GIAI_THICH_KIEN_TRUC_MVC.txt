=================================================================
          GIáº¢I THÃCH CHI TIáº¾T Vá»€ KIáº¾N TRÃšC MVC 
               TRONG PROJECT SPRING BOOT
=================================================================

TÃ¡c giáº£: Gemini AI Assistant
NgÃ y táº¡o: 30/12/2024
Project: Viet Express Logistics

=================================================================
                    Tá»”NG QUAN KIáº¾N TRÃšC
=================================================================

Project nÃ y sá»­ dá»¥ng kiáº¿n trÃºc MVC (Model-View-Controller) cá»§a 
Spring Boot, Ä‘Æ°á»£c chia thÃ nh cÃ¡c táº§ng rÃµ rÃ ng:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      BROWSER/CLIENT                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     CONTROLLER                          â”‚
    â”‚  (AdminPersonnelController, AdminSystemController,...)  â”‚
    â”‚  - Nháº­n request tá»« browser                              â”‚
    â”‚  - Gá»i Service xá»­ lÃ½ logic                              â”‚
    â”‚  - Tráº£ vá» View (HTML) hoáº·c JSON                         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      SERVICE                            â”‚
    â”‚  (UserService, CustomerService, ShipperService,...)     â”‚
    â”‚  - Xá»­ lÃ½ business logic                                 â”‚
    â”‚  - Chuyá»ƒn Ä‘á»•i Entity â†” DTO                              â”‚
    â”‚  - Gá»i Repository Ä‘á»ƒ truy váº¥n database                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                     REPOSITORY                          â”‚
    â”‚  (UserRepository, CustomerRepository,...)               â”‚
    â”‚  - Interface káº¿ thá»«a JpaRepository                      â”‚
    â”‚  - Spring Data JPA tá»± Ä‘á»™ng implement cÃ¡c method         â”‚
    â”‚  - Thá»±c hiá»‡n cÃ¡c truy váº¥n SQL Ä‘áº¿n database              â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                      DATABASE                           â”‚
    â”‚              (MySQL - LogisticsDB)                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


=================================================================
                   1. CONTROLLER LAYER
=================================================================

ğŸ“ Vá»‹ trÃ­: src/main/java/vn/DucBackend/Controllers/Admin/

Controllers nháº­n HTTP requests vÃ  Ä‘iá»u phá»‘i cÃ´ng viá»‡c:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AdminPersonnelController.java                               â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ Quáº£n lÃ½: User, Customer, Shipper, Staff                     â”‚
â”‚                                                             â”‚
â”‚ CÃ¡c endpoint:                                               â”‚
â”‚                                                             â”‚
â”‚ USER:                                                       â”‚
â”‚   GET  /admin/user          â†’ Danh sÃ¡ch users               â”‚
â”‚   GET  /admin/user/search   â†’ TÃ¬m kiáº¿m user                 â”‚
â”‚   GET  /admin/user/create   â†’ Form táº¡o má»›i                  â”‚
â”‚   POST /admin/user/create   â†’ Xá»­ lÃ½ táº¡o má»›i                 â”‚
â”‚   GET  /admin/user/edit/{id}â†’ Form chá»‰nh sá»­a                â”‚
â”‚   POST /admin/user/edit/{id}â†’ Xá»­ lÃ½ cáº­p nháº­t                â”‚
â”‚   GET  /admin/user/delete/{id}â†’ XoÃ¡ user                    â”‚
â”‚   GET  /admin/user/toggle/{id}â†’ Báº­t/táº¯t tráº¡ng thÃ¡i          â”‚
â”‚                                                             â”‚
â”‚ CUSTOMER:                                                   â”‚
â”‚   GET  /admin/customer      â†’ Danh sÃ¡ch khÃ¡ch hÃ ng          â”‚
â”‚   GET  /admin/customer/create â†’ Form táº¡o má»›i                â”‚
â”‚   POST /admin/customer/create â†’ Xá»­ lÃ½ táº¡o má»›i               â”‚
â”‚   ...                                                       â”‚
â”‚                                                             â”‚
â”‚ SHIPPER:                                                    â”‚
â”‚   GET  /admin/shipper       â†’ Danh sÃ¡ch shipper             â”‚
â”‚   ...                                                       â”‚
â”‚                                                             â”‚
â”‚ STAFF:                                                      â”‚
â”‚   GET  /admin/staff         â†’ Danh sÃ¡ch nhÃ¢n viÃªn           â”‚
â”‚   ...                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ Dá»¤ CODE CONTROLLER:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

@Controller
@RequestMapping("/admin")
public class AdminPersonnelController {

    @Autowired
    private UserService userService;  // Inject Service
    
    @Autowired
    private RoleService roleService;
    
    // GET - Hiá»ƒn thá»‹ danh sÃ¡ch
    @GetMapping("/user")
    public String userList(Model model, HttpServletRequest request) {
        // 1. Gá»i Service láº¥y dá»¯ liá»‡u
        List<UserDTO> users = userService.findAllUsers();
        
        // 2. Äáº©y dá»¯ liá»‡u vÃ o Model cho View
        model.addAttribute("users", users);
        
        // 3. Tráº£ vá» tÃªn template (Thymeleaf sáº½ render)
        return "admin/user/list";  // â†’ templates/admin/user/list.html
    }
    
    // POST - Xá»­ lÃ½ táº¡o má»›i
    @PostMapping("/user/create")
    public String createUser(@ModelAttribute UserDTO dto, 
                             RedirectAttributes redirectAttributes) {
        try {
            // Gá»i Service táº¡o user
            userService.createUser(dto);
            
            // ThÃªm flash message thÃ nh cÃ´ng
            redirectAttributes.addFlashAttribute("success", "Táº¡o user thÃ nh cÃ´ng!");
        } catch (Exception e) {
            // ThÃªm flash message lá»—i
            redirectAttributes.addFlashAttribute("error", "Lá»—i: " + e.getMessage());
        }
        
        // Redirect vá» danh sÃ¡ch
        return "redirect:/admin/user";
    }
}


=================================================================
                    2. SERVICE LAYER
=================================================================

ğŸ“ Vá»‹ trÃ­: src/main/java/vn/DucBackend/Services/

Service Layer chá»©a business logic vÃ  chuyá»ƒn Ä‘á»•i Entity â†” DTO:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Táº¡i sao cáº§n Service Layer?                                  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ 1. Separation of Concerns:                                  â”‚
â”‚    Controller khÃ´ng nÃªn chá»©a business logic                 â”‚
â”‚                                                             â”‚
â”‚ 2. Reusability:                                             â”‚
â”‚    Nhiá»u Controller cÃ³ thá»ƒ dÃ¹ng chung 1 Service             â”‚
â”‚                                                             â”‚
â”‚ 3. Testability:                                             â”‚
â”‚    Dá»… viáº¿t unit test cho Service                            â”‚
â”‚                                                             â”‚
â”‚ 4. Transaction Management:                                  â”‚
â”‚    @Transactional Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n dá»¯ liá»‡u             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ Dá»¤ CODE SERVICE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Interface
public interface UserService {
    List<UserDTO> findAllUsers();
    UserDTO createUser(UserDTO dto);
    UserDTO updateUser(Long id, UserDTO dto);
    void deleteUser(Long id);
}

// Implementation
@Service
@RequiredArgsConstructor
@Transactional
public class UserServiceImpl implements UserService {

    private final UserRepository userRepository;
    private final RoleRepository roleRepository;
    
    @Override
    public List<UserDTO> findAllUsers() {
        // 1. Gá»i Repository láº¥y Entity tá»« database
        List<User> users = userRepository.findAll();
        
        // 2. Chuyá»ƒn Ä‘á»•i Entity â†’ DTO
        return users.stream()
                    .map(this::toDTO)
                    .collect(Collectors.toList());
    }
    
    @Override
    public UserDTO createUser(UserDTO dto) {
        // 1. Chuyá»ƒn DTO â†’ Entity
        User user = new User();
        user.setUsername(dto.getUsername());
        user.setPassword(dto.getPassword());
        user.setEmail(dto.getEmail());
        user.setPhone(dto.getPhone());
        
        // 2. Láº¥y Role tá»« database
        Role role = roleRepository.findById(dto.getRoleId())
            .orElseThrow(() -> new RuntimeException("Role not found"));
        user.setRole(role);
        
        // 3. LÆ°u vÃ o database
        User savedUser = userRepository.save(user);
        
        // 4. Tráº£ vá» DTO
        return toDTO(savedUser);
    }
    
    // Helper method: Chuyá»ƒn Entity â†’ DTO
    private UserDTO toDTO(User user) {
        UserDTO dto = new UserDTO();
        dto.setId(user.getId());
        dto.setUsername(user.getUsername());
        dto.setEmail(user.getEmail());
        dto.setPhone(user.getPhone());
        if (user.getRole() != null) {
            dto.setRoleId(user.getRole().getId());
            dto.setRoleName(user.getRole().getRoleName());
        }
        dto.setIsActive(user.getIsActive());
        dto.setCreatedAt(user.getCreatedAt());
        return dto;
    }
}


=================================================================
                    3. DTO (Data Transfer Object)
=================================================================

ğŸ“ Vá»‹ trÃ­: src/main/java/vn/DucBackend/DTO/

DTO lÃ  object chá»‰ chá»©a dá»¯ liá»‡u, dÃ¹ng Ä‘á»ƒ truyá»n giá»¯a cÃ¡c layer:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Táº¡i sao cáº§n DTO?                                            â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ 1. Security:                                                â”‚
â”‚    KhÃ´ng expose toÃ n bá»™ Entity (nhÆ° password) ra view       â”‚
â”‚                                                             â”‚
â”‚ 2. Flexibility:                                             â”‚
â”‚    DTO cÃ³ thá»ƒ khÃ¡c cáº¥u trÃºc Entity                          â”‚
â”‚    (VD: UserDTO cÃ³ thÃªm roleName tá»« báº£ng khÃ¡c)              â”‚
â”‚                                                             â”‚
â”‚ 3. Performance:                                             â”‚
â”‚    TrÃ¡nh Lazy Loading issues khi tráº£ vá» Entity              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ Dá»¤:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

// Entity (lÆ°u trong database)
@Entity
public class User {
    private Long id;
    private String username;
    private String password;      // âš ï¸ KhÃ´ng muá»‘n expose
    private String email;
    private Role role;            // Object phá»©c táº¡p
}

// DTO (truyá»n ra view)
@Data
public class UserDTO {
    private Long id;
    private String username;
    private String email;
    private Long roleId;          // Chá»‰ láº¥y ID
    private String roleName;      // Flatten tá»« Role object
}


=================================================================
                     4. VIEW LAYER
=================================================================

ğŸ“ Vá»‹ trÃ­: src/main/resources/templates/admin/

Views sá»­ dá»¥ng Thymeleaf template engine:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ templates/admin/                                            â”‚
â”‚ â”œâ”€â”€ user/                                                   â”‚
â”‚ â”‚   â”œâ”€â”€ list.html         â† Danh sÃ¡ch user                  â”‚
â”‚ â”‚   â””â”€â”€ form.html         â† Form táº¡o/sá»­a user               â”‚
â”‚ â”œâ”€â”€ customer/                                               â”‚
â”‚ â”‚   â”œâ”€â”€ list.html                                           â”‚
â”‚ â”‚   â””â”€â”€ form.html                                           â”‚
â”‚ â”œâ”€â”€ shipper/                                                â”‚
â”‚ â”‚   â”œâ”€â”€ list.html                                           â”‚
â”‚ â”‚   â””â”€â”€ form.html                                           â”‚
â”‚ â”œâ”€â”€ staff/                                                  â”‚
â”‚ â”‚   â”œâ”€â”€ list.html                                           â”‚
â”‚ â”‚   â””â”€â”€ form.html                                           â”‚
â”‚ â”œâ”€â”€ role/                                                   â”‚
â”‚ â”‚   â””â”€â”€ list.html         â† Chá»‰ xem (role cá»‘ Ä‘á»‹nh)          â”‚
â”‚ â””â”€â”€ layout-admin.html     â† Layout chung                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

VÃ Dá»¤ CODE THYMELEAF:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

<!-- list.html - Hiá»ƒn thá»‹ danh sÃ¡ch -->
<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Username</th>
            <th>Email</th>
            <th>Thao tÃ¡c</th>
        </tr>
    </thead>
    <tbody>
        <!-- th:each - VÃ²ng láº·p qua danh sÃ¡ch users -->
        <tr th:each="u : ${users}">
            <td th:text="${u.id}"></td>
            <td th:text="${u.username}"></td>
            <td th:text="${u.email}"></td>
            <td>
                <!-- Link Ä‘á»™ng vá»›i tham sá»‘ -->
                <a th:href="@{/admin/user/edit/{id}(id=${u.id})}">Sá»­a</a>
                <a th:href="@{/admin/user/delete/{id}(id=${u.id})}">XoÃ¡</a>
            </td>
        </tr>
    </tbody>
</table>

<!-- form.html - Form nháº­p liá»‡u -->
<form th:action="@{/admin/user/create}" method="post">
    <input type="text" name="username" th:value="${user.username}">
    <input type="email" name="email" th:value="${user.email}">
    
    <!-- Dropdown chá»n role -->
    <select name="roleId">
        <option th:each="r : ${roles}" 
                th:value="${r.id}" 
                th:text="${r.roleName}">
        </option>
    </select>
    
    <button type="submit">LÆ°u</button>
</form>


=================================================================
                  5. DATALOADER - Khá»Ÿi táº¡o dá»¯ liá»‡u
=================================================================

ğŸ“ Vá»‹ trÃ­: src/main/java/vn/DucBackend/Config/DataLoader.java

DataLoader tá»± Ä‘á»™ng cháº¡y khi app khá»Ÿi Ä‘á»™ng Ä‘á»ƒ táº¡o 4 roles cá»‘ Ä‘á»‹nh:

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4 ROLES Cá» Äá»ŠNH                                             â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ 1. ADMIN     - Quáº£n trá»‹ viÃªn há»‡ thá»‘ng (toÃ n quyá»n)          â”‚
â”‚ 2. MANAGER   - Quáº£n lÃ½ (quáº£n lÃ½ váº­n hÃ nh, nhÃ¢n sá»±)          â”‚
â”‚ 3. STAFF     - NhÃ¢n viÃªn (xá»­ lÃ½ Ä‘Æ¡n, há»— trá»£ khÃ¡ch)          â”‚
â”‚ 4. CUSTOMER  - KhÃ¡ch hÃ ng (táº¡o Ä‘Æ¡n, theo dÃµi Ä‘Æ¡n)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CODE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

@Component
public class DataLoader implements CommandLineRunner {
    
    @Autowired
    private RoleRepository roleRepository;
    
    @Override
    public void run(String... args) throws Exception {
        // Chá»‰ táº¡o náº¿u chÆ°a cÃ³
        if (roleRepository.count() == 0) {
            createRole("ADMIN", "Quáº£n trá»‹ viÃªn há»‡ thá»‘ng");
            createRole("MANAGER", "Quáº£n lÃ½");
            createRole("STAFF", "NhÃ¢n viÃªn");
            createRole("CUSTOMER", "KhÃ¡ch hÃ ng");
        }
    }
}


=================================================================
                    6. LUá»’NG Xá»¬ LÃ REQUEST
=================================================================

VÃ­ dá»¥: User truy cáº­p /admin/user

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Browser gá»­i GET /admin/user                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. Spring MVC tÃ¬m Controller cÃ³ @GetMapping("/user") â”‚
    â”‚    â†’ AdminPersonnelController.userList()             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. Controller gá»i userService.findAllUsers()         â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. Service gá»i userRepository.findAll()              â”‚
    â”‚    â†’ Tráº£ vá» List<User> (Entity)                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 5. Service chuyá»ƒn Ä‘á»•i List<User> â†’ List<UserDTO>     â”‚
    â”‚    â†’ Tráº£ vá» cho Controller                           â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 6. Controller thÃªm vÃ o Model:                        â”‚
    â”‚    model.addAttribute("users", listUserDTO)          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 7. Controller tráº£ vá» "admin/user/list"               â”‚
    â”‚    â†’ Thymeleaf render file list.html                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 8. HTML Ä‘Æ°á»£c gá»­i vá» Browser                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


=================================================================
                   7. Cáº¤U TRÃšC THÆ¯ Má»¤C
=================================================================

src/main/java/vn/DucBackend/
â”œâ”€â”€ Config/
â”‚   â””â”€â”€ DataLoader.java         â† Khá»Ÿi táº¡o 4 roles
â”œâ”€â”€ Controllers/
â”‚   â””â”€â”€ Admin/
â”‚       â”œâ”€â”€ AdminPersonnelController.java   â† User,Customer,Shipper,Staff
â”‚       â”œâ”€â”€ AdminOperationController.java   â† Request,Parcel,Trip,Payment
â”‚       â”œâ”€â”€ AdminResourceController.java    â† Location,Route,Vehicle,ServiceType
â”‚       â”œâ”€â”€ AdminSystemController.java      â† Role,ActionType,SystemLog
â”‚       â”œâ”€â”€ AdminMarketingController.java   â† CaseStudy
â”‚       â””â”€â”€ AdminDashboardController.java   â† Dashboard
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ UserService.java
â”‚   â”œâ”€â”€ CustomerService.java
â”‚   â”œâ”€â”€ ShipperService.java
â”‚   â”œâ”€â”€ StaffService.java
â”‚   â”œâ”€â”€ RoleService.java
â”‚   â””â”€â”€ Impl/
â”‚       â”œâ”€â”€ UserServiceImpl.java
â”‚       â”œâ”€â”€ CustomerServiceImpl.java
â”‚       â””â”€â”€ ...
â”œâ”€â”€ DTO/
â”‚   â”œâ”€â”€ UserDTO.java
â”‚   â”œâ”€â”€ CustomerDTO.java
â”‚   â”œâ”€â”€ ShipperDTO.java
â”‚   â””â”€â”€ ...
â”œâ”€â”€ Entities/
â”‚   â”œâ”€â”€ User.java
â”‚   â”œâ”€â”€ Customer.java
â”‚   â”œâ”€â”€ Role.java
â”‚   â””â”€â”€ ...
â””â”€â”€ Repositories/
    â”œâ”€â”€ UserRepository.java
    â”œâ”€â”€ CustomerRepository.java
    â””â”€â”€ ...

src/main/resources/templates/admin/
â”œâ”€â”€ user/
â”‚   â”œâ”€â”€ list.html
â”‚   â””â”€â”€ form.html
â”œâ”€â”€ customer/
â”‚   â”œâ”€â”€ list.html
â”‚   â””â”€â”€ form.html
â”œâ”€â”€ shipper/
â”‚   â”œâ”€â”€ list.html
â”‚   â””â”€â”€ form.html
â”œâ”€â”€ staff/
â”‚   â”œâ”€â”€ list.html
â”‚   â””â”€â”€ form.html
â”œâ”€â”€ role/
â”‚   â””â”€â”€ list.html
â””â”€â”€ layout-admin.html


=================================================================
                        Káº¾T LUáº¬N
=================================================================

âœ… Controller: Nháº­n request â†’ Gá»i Service â†’ Tráº£ View
âœ… Service: Xá»­ lÃ½ logic â†’ Entity â†” DTO â†’ Gá»i Repository  
âœ… DTO: Object truyá»n dá»¯ liá»‡u giá»¯a cÃ¡c layer
âœ… Repository: Interface truy váº¥n database
âœ… View: Thymeleaf template hiá»ƒn thá»‹ HTML
âœ… DataLoader: Tá»± Ä‘á»™ng táº¡o 4 roles khi app khá»Ÿi Ä‘á»™ng

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Háº¾T
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
